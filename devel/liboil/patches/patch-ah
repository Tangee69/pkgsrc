$NetBSD: patch-ah,v 1.1 2008/03/12 21:05:32 drochner Exp $

--- liboil/i386_amd64/copy.c.orig	2008-03-03 17:35:30.000000000 +0100
+++ liboil/i386_amd64/copy.c
@@ -375,7 +375,8 @@ static void splat_u16_ns_mmx (uint16_t *
     "  emms\n"
     : [dest] "+r" (dest),
       [n] "+r" (n)
-    : [src] "r" (src));
+    : [src] "r" (src)
+    : "ecx");
 }
 OIL_DEFINE_IMPL_FULL (splat_u16_ns_mmx, splat_u16_ns, OIL_IMPL_FLAG_MMX|OIL_IMPL_FLAG_MMXEXT);
 
@@ -401,7 +402,8 @@ static void splat_u16_ns_mmx_2 (uint16_t
     "  emms\n"
     : [dest] "+r" (dest),
       [n] "+r" (n)
-    : [src] "r" (src));
+    : [src] "r" (src)
+    : "ecx");
 }
 OIL_DEFINE_IMPL_FULL (splat_u16_ns_mmx_2, splat_u16_ns, OIL_IMPL_FLAG_MMX|OIL_IMPL_FLAG_MMXEXT);
 
@@ -429,7 +431,8 @@ static void splat_u16_ns_mmx_3 (uint16_t
     "  emms\n"
     : [dest] "+r" (dest),
       [n] "+r" (n)
-    : [src] "r" (src));
+    : [src] "r" (src)
+    : "ecx");
 }
 OIL_DEFINE_IMPL_FULL (splat_u16_ns_mmx_3, splat_u16_ns, OIL_IMPL_FLAG_MMX|OIL_IMPL_FLAG_MMXEXT);
 
