$NetBSD: patch-ab,v 1.1 2008/08/23 15:56:28 wiz Exp $

--- src/stackvma-mincore.c.orig	2006-05-15 14:01:12.000000000 +0200
+++ src/stackvma-mincore.c
@@ -227,7 +227,7 @@ mincore_is_near_this (unsigned long addr
   unsigned long testaddr = addr - (vma->start - addr);
   if (testaddr > addr) /* overflow? */
     testaddr = 0;
-  return is_unmapped (testaddr, addr);
+  return is_unmapped (testaddr, vma->start - 1);
 }
 
 #endif
@@ -246,7 +246,7 @@ mincore_is_near_this (unsigned long addr
   unsigned long testaddr = addr + (addr - vma->end);
   if (testaddr < addr) /* overflow? */
     testaddr = ~0UL;
-  return is_unmapped (addr, testaddr);
+  return is_unmapped (vma->end, testaddr);
 }
 
 #endif
