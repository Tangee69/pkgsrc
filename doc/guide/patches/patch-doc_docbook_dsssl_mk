$NetBSD: patch-doc_docbook_dsssl_mk,v 1.1 2020/06/21 04:45:37 rillig Exp $

Generate PDF directly, without an intermediate PostScript file.

--- ../htdocs/share/mk/doc.docbook.dsssl.mk.orig	2005-10-13 09:24:33.000000000 +0000
+++ ../htdocs/share/mk/doc.docbook.dsssl.mk
@@ -7,6 +7,7 @@
 JADE?=		env ${JADE_ENV} ${JADE_BIN} 
 JADETEX_BIN?=	jadetex
 JADETEX?=	${JADETEX_BIN}
+PDFJADETEX?=	${PREFIX}/bin/pdfjadetex
 JADE_ENV?=	SP_ENCODING=${SP_ENCODING} \
 		SGML_CATALOG_FILES= 
 
@@ -113,8 +114,11 @@
 	${DVIPS} -f $*.dvi > $@
 	rm -f *.log *.aux
 
-.ps.pdf:
-	$(PS2PDF) $<
+.tex.pdf:
+	-${PDFJADETEX} $*.tex
+	-${PDFJADETEX} $*.tex
+	-${PDFJADETEX} $*.tex
+	rm -f *.log *.aux
 
 # w3m doesn't render &#8220 or &#8221 properly, so just replace them
 # with normal double quotes.
