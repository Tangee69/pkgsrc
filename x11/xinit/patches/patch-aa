$NetBSD: patch-aa,v 1.2 2008/04/16 22:07:24 wiz Exp $

--- startx.cpp.orig	2008-03-06 22:08:48.000000000 +0000
+++ startx.cpp
@@ -243,7 +243,11 @@ if [ x"$enable_xauth" = x1 ] ; then
 #if defined(HAS_COOKIE_MAKER) && defined(MK_COOKIE)
     mcookie=`MK_COOKIE`
 #else
-    mcookie=`dd if=/dev/random bs=16 count=1 2>/dev/null | hexdump -e \\"%08x\\"`
+    if [ -r /dev/urandom ]; then
+	mcookie=`dd if=/dev/urandom bs=16 count=1 2>/dev/null | hexdump -e \\"%08x\\"`
+    else
+	mcookie=`dd if=/dev/random bs=16 count=1 2>/dev/null | hexdump -e \\"%08x\\"`
+    fi
     if test x"$mcookie" = x; then
         echo "Couldn't create cookie"
         exit 1
