$NetBSD: patch-src_Makefile,v 1.1 2015/08/27 09:14:52 khorben Exp $

Fix build on amd64

--- src/Makefile.orig	2015-08-10 23:33:27.000000000 +0000
+++ src/Makefile
@@ -6,8 +6,8 @@ LIBDIR	= $(PREFIX)/lib
 CC	= cc
 CPPFLAGSF=
 CPPFLAGS=
-CFLAGSF	= -W
-CFLAGS	= -Wall -g -O2 -pedantic -fPIC -fstack-protector
+CFLAGSF	= -fPIC
+CFLAGS	= -W -Wall -g -O2 -pedantic -fstack-protector
 AR	= ar
 RANLIB	= ranlib
 CCSHARED= $(CC) -shared
@@ -40,21 +40,21 @@ $(OBJDIR)libPanel.so: $(OBJDIR)libPanel.
 
 panel_OBJS = $(OBJDIR)main.o
 panel_CFLAGS = $(CPPFLAGSF) $(CPPFLAGS) -D PREFIX=\"$(PREFIX)\" $(CFLAGSF) $(CFLAGS) `pkg-config --cflags libDesktop`
-panel_LDFLAGS = $(LDFLAGSF) $(LDFLAGS) `pkg-config --libs libDesktop` -lintl -L. -L$(OBJDIR). -Wl,-rpath,$(LIBDIR) -lPanel -Wl,-pie
+panel_LDFLAGS = $(LDFLAGSF) $(LDFLAGS) `pkg-config --libs libDesktop` -lintl -L. -L$(OBJDIR). -Wl,-rpath,$(LIBDIR) -lPanel
 
 $(OBJDIR)panel: $(panel_OBJS) $(OBJDIR)libPanel.a
 	$(CC) -o $(OBJDIR)panel $(panel_OBJS) $(panel_LDFLAGS)
 
 panelctl_OBJS = $(OBJDIR)panelctl.o
 panelctl_CFLAGS = $(CPPFLAGSF) $(CPPFLAGS) $(CFLAGSF) $(CFLAGS) `pkg-config --cflags libDesktop`
-panelctl_LDFLAGS = $(LDFLAGSF) $(LDFLAGS) `pkg-config --libs libDesktop` -lintl -Wl,-pie
+panelctl_LDFLAGS = $(LDFLAGSF) $(LDFLAGS) `pkg-config --libs libDesktop` -lintl
 
 $(OBJDIR)panelctl: $(panelctl_OBJS)
 	$(CC) -o $(OBJDIR)panelctl $(panelctl_OBJS) $(panelctl_LDFLAGS)
 
 run_OBJS = $(OBJDIR)run.o
 run_CFLAGS = $(CPPFLAGSF) $(CPPFLAGS) -D PREFIX=\"$(PREFIX)\" $(CFLAGSF) $(CFLAGS) `pkg-config --cflags libSystem gtk+-2.0`
-run_LDFLAGS = $(LDFLAGSF) $(LDFLAGS) `pkg-config --libs libSystem gtk+-2.0` -lintl -Wl,-pie
+run_LDFLAGS = $(LDFLAGSF) $(LDFLAGS) `pkg-config --libs libSystem gtk+-2.0` -lintl
 
 $(OBJDIR)run: $(run_OBJS)
 	$(CC) -o $(OBJDIR)run $(run_OBJS) $(run_LDFLAGS)
