$NetBSD: patch-ab,v 1.6 2008/10/02 13:13:05 joerg Exp $

--- fea/data_plane/control_socket/click_socket.cc.orig	2008-09-30 15:43:19.000000000 +0200
+++ fea/data_plane/control_socket/click_socket.cc
@@ -731,7 +731,15 @@ ClickSocket::mount_click_file_system(str
 #ifdef HOST_OS_LINUX
     ret_value = mount("none", _kernel_click_mount_directory.c_str(),
 		      CLICK_FILE_SYSTEM_TYPE.c_str(), 0, 0);
-#else // ! HOST_OS_LINUX
+#elif defined(__NetBSD__) && defined(__NetBSD_Prereq__)
+#   if __NetBSD_Prereq__(4,99,24)
+    ret_value = mount(CLICK_FILE_SYSTEM_TYPE.c_str(),
+		      _kernel_click_mount_directory.c_str(), 0, 0, 0);
+#  else
+    ret_value = mount(CLICK_FILE_SYSTEM_TYPE.c_str(),
+		      _kernel_click_mount_directory.c_str(), 0, 0);
+#  endif
+#else
     ret_value = mount(CLICK_FILE_SYSTEM_TYPE.c_str(),
 		      _kernel_click_mount_directory.c_str(), 0, 0);
 #endif // ! HOST_OS_LINUX
