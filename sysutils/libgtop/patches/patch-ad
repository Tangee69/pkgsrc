$NetBSD: patch-ad,v 1.7 2008/11/15 19:34:11 wiz Exp $

--- sysdeps/freebsd/procaffinity.c.orig	2008-08-18 15:23:36.000000000 +0000
+++ sysdeps/freebsd/procaffinity.c
@@ -21,7 +21,9 @@
 #include <glibtop/procaffinity.h>
 #include <glibtop/error.h>
 
+#if defined(__FreeBSD__)
 #include <glibtop_private.h>
+#endif
 
 #include <sys/param.h>
 #if __FreeBSD_version > 800024
@@ -41,7 +43,7 @@ _glibtop_init_proc_affinity_s(glibtop *s
 guint16 *
 glibtop_get_proc_affinity_s(glibtop *server, glibtop_proc_affinity *buf, pid_t pid)
 {
-#if __FreeBSD_version > 800024
+#if defined(__FreeBSD__) && __FreeBSD_version > 800024
   id_t id;
   cpulevel_t level;
   cpuwhich_t which;
