$NetBSD: patch-ab,v 1.2 2008/03/17 02:31:10 bjs Exp $

--- configure.orig	2008-03-15 02:20:31.000000000 -0400
+++ configure
@@ -19799,6 +19799,10 @@ case "${host_os}" in
     # need small realtime stack
     JACK_THREAD_STACK_TOUCH=10000
     ;;
+  netbsd*)
+    # need small realtime stack
+    JACK_THREAD_STACK_TOUCH=10000
+    ;;
   darwin*)
     JACK_THREAD_STACK_TOUCH=10000	# need small realtime stack
     JACK_CPP_VARARGS_BROKEN=1
@@ -23039,8 +23043,7 @@ fi
 
 JACK_CORE_CFLAGS="-I\$(top_srcdir)/config -I\$(top_srcdir) \
 -I\$(top_srcdir) -D_REENTRANT -D_POSIX_PTHREAD_SEMANTICS -Wall -g"
-JACK_OPT_CFLAGS="$JACK_CORE_CFLAGS -march=pentium2 -mcpu=pentium4 -O3 \
--ffast-math -funroll-loops -fprefetch-loop-arrays"
+JACK_OPT_CFLAGS="$JACK_CORE_CFLAGS"
 JACK_CFLAGS="$JACK_CORE_CFLAGS $CFLAGS"
 
 
@@ -23122,7 +23125,7 @@ rm -f core conftest.err conftest.$ac_obj
     fi
 
 
-    JACK_OPT_CFLAGS="-D_REENTRANT -O2 -mcpu=7400 $ALTIVEC_OPT_FLAGS_FLAGS -mhard-float -mpowerpc-gfxopt"
+    JACK_OPT_CFLAGS="-D_REENTRANT -O2 $ALTIVEC_OPT_FLAGS_FLAGS -mhard-float -mpowerpc-gfxopt"
 
 elif echo $target_cpu | egrep '(i.86|x86_64)' >/dev/null; then
 
@@ -23294,14 +23297,14 @@ cat >>confdefs.h <<\_ACEOF
 #define x86 1
 _ACEOF
 
-    COMMON_X86_OPT_FLAGS="-DREENTRANT -O3 -fomit-frame-pointer -ffast-math -funroll-loops"
+    COMMON_X86_OPT_FLAGS="-DREENTRANT"
 
     if test "$target_cpu" = "i586"; then
 	JACK_OPT_CFLAGS="-march=i586 "
     elif test "$target_cpu" = "i686"; then
 	JACK_OPT_CFLAGS="-march=i686"
     elif test "$target_cpu" = "x86_64"; then
-	JACK_OPT_CFLAGS="-march=k8"
+	JACK_OPT_CFLAGS=""
     else
 	:
     fi
