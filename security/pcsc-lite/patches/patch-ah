$NetBSD: patch-ah,v 1.1 2008/04/30 13:34:28 shannonjr Exp $

--- src/winscard_msg_srv.c.orig	2007-10-13 15:21:11.000000000 -0600
+++ src/winscard_msg_srv.c
@@ -165,7 +165,7 @@ INTERNAL int SHMInitializeCommonSegment(
  * @retval -1 Can not set the connection to non-blocking mode.
  * @retval 2 Timeout.
  */
-#if defined(__NetBSD__) || defined(__FreeBSD__) || defined(__OpenBSD__)
+#if defined(__NetBSD__) || defined(__FreeBSD__) || defined(__OpenBSD__) || defined(__DragonFly__)
 #define DO_TIMEOUT
 #endif
 INTERNAL int32_t SHMProcessEventsServer(uint32_t *pdwClientID, int32_t blocktime)
