$NetBSD: patch-ad,v 1.1 2008/04/10 16:53:44 drochner Exp $

--- ./common/gkr-unix-credentials.c.orig	2008-02-13 22:07:15.000000000 +0100
+++ ./common/gkr-unix-credentials.c
@@ -36,6 +36,10 @@
 #include <ucred.h>
 #endif
 
+#ifdef __NetBSD__
+#include <sys/un.h> /* for LOCAL_CREDS */
+#endif
+
 int
 gkr_unix_credentials_read (int sock, pid_t *pid, uid_t *uid)
 {
@@ -125,7 +129,6 @@ gkr_unix_credentials_read (int sock, pid
 		cred = (struct sockcred *) CMSG_DATA (&cmsg.hdr);
 		*pid = 0;
 		*uid = cred->sc_euid;
-		set_local_creds(fd, FALSE);
 #elif defined(HAVE_GETPEERUCRED)
 		ucred_t *uc = NULL;
 
