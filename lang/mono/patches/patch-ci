$NetBSD: patch-ci,v 1.3 2009/02/12 19:44:50 kefren Exp $
--- mono/mini/mini-amd64.c.orig	2008-11-11 06:56:14.000000000 +0200
+++ mono/mini/mini-amd64.c	2009-02-12 21:06:56.000000000 +0200
@@ -6300,10 +6300,14 @@
 					else
 						item->chunk_size += MOV_REG_IMM_SIZE + CMP_REG_REG_SIZE;
 				}
-				if (vtable_is_32bit)
-					item->chunk_size += MOV_REG_IMM_32BIT_SIZE;
-				else
+				if (fail_tramp) {
 					item->chunk_size += MOV_REG_IMM_SIZE;
+				} else {
+					if (vtable_is_32bit)
+						item->chunk_size += MOV_REG_IMM_32BIT_SIZE;
+					else
+						item->chunk_size += MOV_REG_IMM_SIZE;
+				}
 				item->chunk_size += BR_SMALL_SIZE + JUMP_REG_SIZE;
 			} else {
 				if (fail_tramp) {
