$NetBSD: patch-aa,v 1.2 2008/01/09 19:21:09 drochner Exp $

--- zfuncs.cpp.orig	2008-01-02 09:14:04.000000000 +0100
+++ zfuncs.cpp
@@ -2150,26 +2150,15 @@ char     zexedirk[1000], zappdirk[200], 
 
 void initz_appfiles(const char *appfile, ...)  //  null terminator         v.07
 {
-   char           command[1200], *pp;
-   int            fcc, err;
+   char           command[1200];
+   int            err;
    struct stat    statdat;
    va_list        arglist;
 
-   fcc = readlink("/proc/self/exe",zexedirk,999);                          //  get /dirk-path/appname
-   if (fcc <= 0) fcc = readlink("/proc/curproc/file",zexedirk,999);        //  BSD version      v.13
-   if (fcc < 3 || fcc > 997) zappcrash("cannot find executable location");
-   zexedirk[fcc] = 0;
-   pp = strrchr(zexedirk,'/');
-   if (! pp) zappcrash("cannot find executable location");
-   *pp = 0;
-
-   strncpy0(zappname,pp+1,39);                                             //  appname [ .exe ]
-   pp = strrchr(zappname,'.');
-   if (pp) *pp = 0;
-   
-   pp = cuserid(0);                                                        //  get /home/user/.appname/
-   if (strEqu(pp,"root")) snprintf(zappdirk,199,"/root/.%s",zappname);
-   else snprintf(zappdirk,199,"%s/.%s",getenv("HOME"),zappname);           //  use HOME variable         v.13
+   strncpy0(zexedirk, "/usr/pkg/share/fotox", 999);
+   strncpy0(zappname,"fotox",39);
+   
+   snprintf(zappdirk,199,"%s/.%s",getenv("HOME"),zappname);           //  use HOME variable         v.13
    
    err = stat(zappdirk,&statdat);                                          //  does it exist already?
    if (err) {
