# $NetBSD: INSTALL,v 1.12 2009/02/23 20:12:19 minskim Exp $

PATH="@PREFIX@"/bin:"${PATH}"
export PATH

case "${STAGE}" in
POST-INSTALL)
	${TEST} ! -x ./+TETEX || ./+TETEX ADD
	;;
esac

#
# Generate a +TETEX script that updates the teTeX installation
# based on user-modifiable configuration files.
#
case "${STAGE},$1" in
UNPACK,|UNPACK,+TETEX)
	${CAT} > ./+TETEX << 'EOF'
#!@SH@
#
# +TETEX - teTeX installation update script
#
# Usage: ./+TETEX ADD|REMOVE

CAT="@CAT@"
ECHO="@ECHO@"
GREP="@GREP@"
RM="@RM@"
RMDIR="@RMDIR@"
TEST="@TEST@"
TRUE="@TRUE@"

SELF=$0
ACTION=$1
: ${PKG_PREFIX=@PREFIX@}

TEXMF_DISTDATADIR="${PKG_PREFIX}/share/texmf-dist"
TEXMF_DATADIR="${PKG_PREFIX}/share/texmf"
TEXMF_LOCALDATADIR="${PKG_PREFIX}/share/texmf-local"
TEXMF_VARDIR="@VARBASE@/lib/texmf"

exitcode=0
case $ACTION in
ADD)
	# Update teTeX installation to support different TeX formats.
	${TEST} ! -x ${PKG_PREFIX}/bin/texlinks ||
		${PKG_PREFIX}/bin/texlinks
	;;

REMOVE)
	@MKTEXLSR@ ${TEXMF_VARDIR} @PKG_SYSCONFBASE@/texmf
	;;

*)
	${ECHO} "Usage: ./+TETEX ADD|REMOVE [metadatadir]"
	;;
esac
exit $exitcode
EOF
	${CHMOD} +x ./+TETEX
	;;
esac
