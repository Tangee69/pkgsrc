$NetBSD: patch-ae,v 1.18 2008/01/22 23:59:00 markd Exp $

post 1.3.5 fix from svn.

Index: pstops.c
===================================================================
--- filter/pstops.c	(revision 7067)
+++ filter/pstops.c	(revision 7175)
@@ -889,7 +889,8 @@
   * Finish up the last page(s)...
   */
 
-  if (number && !is_first_page(number) && cupsArrayLast(doc->pages))
+  if (number && is_not_last_page(number) && cupsArrayLast(doc->pages) &&
+      check_range(doc, (number - 1) / doc->number_up + 1))
   {
     pageinfo = (pstops_page_t *)cupsArrayLast(doc->pages);
 
