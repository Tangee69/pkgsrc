$NetBSD: patch-ac,v 1.1 2007/10/15 06:07:19 wiz Exp $

--- configure.orig	2005-10-19 09:02:58.000000000 +0000
+++ configure
@@ -873,6 +1325,10 @@ Optional Features:
   --enable-debug          Enable debugging information
   --disable-dependency-tracking Speeds up one-time builds
   --enable-dependency-tracking  Do not reject slow dependency extractors
+  --enable-kde            enable kde support (default: yes)
+  --enable-gnome          enable gnome support (default: yes)
+  --enable-libgnomeui     enable libgnomeui to render thumbnails (default:
+                          yes)
 
 Optional Packages:
   --with-PACKAGE[=ARG]    use PACKAGE [ARG=yes]
@@ -4047,11 +4524,19 @@ else
 fi
 
 else
+	# Check whether --enable-kde was given.
+if test "${enable_kde+set}" = set; then
+  enableval=$enable_kde; ac_cv_enable_kde="$enableval"
+else
+  ac_cv_enable_kde="yes"
+fi
+
+	if test x"$ac_cv_enable_kde" = x"yes" ; then
 
   # Extract the first word of "kde-config", so it can be a program name with args.
 set dummy kde-config; ac_word=$2
 echo "$as_me:$LINENO: checking for $ac_word" >&5
 echo $ECHO_N "checking for $ac_word... $ECHO_C" >&6
 if test "${ac_cv_path_KDE_CONFIG+set}" = set; then
   echo $ECHO_N "(cached) $ECHO_C" >&6
 else
@@ -4115,16 +4601,29 @@ else
 fi
 
 
+	else
+		{ echo "$as_me:$LINENO: WARNING: *** kde support disabled ***" >&5
+echo "$as_me: WARNING: *** kde support disabled ***" >&2;}
+		USE_KDE_FALSE="yes"
+	fi
+	# Check whether --enable-gnome was given.
+if test "${enable_gnome+set}" = set; then
+  enableval=$enable_gnome; ac_cv_enable_gnome="$enableval"
+else
+  ac_cv_enable_gnome="yes"
+fi
+
+	if test x"$ac_cv_enable_gnome" = x"yes" ; then
 
   echo "$as_me:$LINENO: checking for GNOME data directory" >&5
 echo $ECHO_N "checking for GNOME data directory... $ECHO_C" >&6
   GNOME_DATA_DIR=`gnome-config --datadir 2>/dev/null`
   if test x$GNOME_DATA_DIR = x ; then
      echo "$as_me:$LINENO: result: no" >&5
 echo "${ECHO_T}no" >&6
   else
      echo "$as_me:$LINENO: result: $GNOME_DATA_DIR" >&5
 echo "${ECHO_T}$GNOME_DATA_DIR" >&6
   fi
 
 
@@ -4138,13 +4637,18 @@ else
 fi
 
 
+	else
+		{ echo "$as_me:$LINENO: WARNING: *** gnome support disabled ***" >&5
+echo "$as_me: WARNING: *** gnome support disabled ***" >&2;}
+		USE_GNOME_FALSE="yes"
+	fi
 fi
 CXXFLAGS="$CXXFLAGS $DEBUG_FLAGS $WX_CXXFLAGS "
 LIBS="$LIBS $WX_LIBS "
 
 
 echo "$as_me:$LINENO: checking for main in -lwxsvg" >&5
 echo $ECHO_N "checking for main in -lwxsvg... $ECHO_C" >&6
 if test "${ac_cv_lib_wxsvg_main+set}" = set; then
   echo $ECHO_N "(cached) $ECHO_C" >&6
 else
@@ -4611,28 +5259,37 @@ fi
 
 
 
   echo "$as_me:$LINENO: checking if wxWindows was linked with GTK2" >&5
 echo $ECHO_N "checking if wxWindows was linked with GTK2... $ECHO_C" >&6
   if $WX_CONFIG_NAME --libs | grep 'gtk2' > /dev/null ; then
      GTK_USEDVERSION=2
      echo "$as_me:$LINENO: result: yes" >&5
 echo "${ECHO_T}yes" >&6
   else
      echo "$as_me:$LINENO: result: no" >&5
 echo "${ECHO_T}no" >&6
   fi
 
 
 
-if test x"$GTK_USEDVERSION" = x"2" ; then
+
+# Check whether --enable-libgnomeui was given.
+if test "${enable_libgnomeui+set}" = set; then
+  enableval=$enable_libgnomeui; ac_cv_enable_libgnomeui="$enableval"
+else
+  ac_cv_enable_libgnomeui="yes"
+fi
+
+
+if test x"$ac_cv_enable_libgnomeui" = x"yes" ; then
 
 
 if test "x$ac_cv_env_PKG_CONFIG_set" != "xset"; then
 	if test -n "$ac_tool_prefix"; then
   # Extract the first word of "${ac_tool_prefix}pkg-config", so it can be a program name with args.
 set dummy ${ac_tool_prefix}pkg-config; ac_word=$2
 echo "$as_me:$LINENO: checking for $ac_word" >&5
 echo $ECHO_N "checking for $ac_word... $ECHO_C" >&6
 if test "${ac_cv_path_PKG_CONFIG+set}" = set; then
   echo $ECHO_N "(cached) $ECHO_C" >&6
 else
@@ -4777,13 +5449,16 @@ echo "$as_me: WARNING: libgnomeui will n
 else
 	GNOMEUI2_CFLAGS=$pkg_cv_GNOMEUI2_CFLAGS
 	GNOMEUI2_LIBS=$pkg_cv_GNOMEUI2_LIBS
         echo "$as_me:$LINENO: result: yes" >&5
 echo "${ECHO_T}yes" >&6
 	GNOME2="-DGNOME2"
 fi
+	CXXFLAGS="$CXXFLAGS $GNOME2"
+	LIBS="$LIBS $GNOMEUI2_LIBS "
+else
+	{ echo "$as_me:$LINENO: WARNING: libgnomeui dependency disabled" >&5
+echo "$as_me: WARNING: libgnomeui dependency disabled" >&2;}
 fi
-CXXFLAGS="$CXXFLAGS $GNOME2"
-LIBS="$LIBS $GNOMEUI2_LIBS "
 
 CXXFLAGS="$CXXFLAGS -DDATADIR=\\\"$datadir/$PACKAGE\\\""
 
