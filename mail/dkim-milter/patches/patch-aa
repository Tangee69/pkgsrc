$NetBSD: patch-aa,v 1.5 2008/04/20 17:20:20 adrianp Exp $

--- devtools/Site/site.config.m4.orig	2008-04-20 17:49:29.000000000 +0100
+++ devtools/Site/site.config.m4
@@ -11,7 +11,7 @@ dnl
 dnl If you are encountering coredumps and want to be able to analyze them
 dnl using something like "gdb", enable this next line by deleting the "dnl"
 dnl at the front of it.
-dnl define(`confOPTIMIZE', `-g')
+@DEBUG@ define(`confOPTIMIZE', `-g')
 
 dnl Shared library for libdkim
 dnl
@@ -26,7 +26,7 @@ dnl If you want libdkim and dkim.h to be
 dnl the package, enable this next line by deleting the "dnl" at the front
 dnl of it.  This is done automatically if you've requested the shared
 dnl library.
-dnl define(`bld_LIBDKIM_INSTALL', `true')
+define(`bld_LIBDKIM_INSTALL', `true')
 
 dnl Faster strtoul()/strtoull() implementations
 dnl
@@ -40,7 +40,7 @@ dnl libar -- asynchronous resolver libra
 dnl
 dnl If you want to use the asynchronous resolver library, enable this
 dnl next line by deleting the "dnl" at the front of it.
-dnl define(`bld_USE_ARLIB', `true')
+@ARLIB@ define(`bld_USE_ARLIB', `true')
 dnl 
 dnl libar normally uses res_init() or res_ninit() to load the contents
 dnl of resolv.conf for its use.  If neither of these work on your system
@@ -49,7 +49,7 @@ dnl may need to enable code that parses 
 dnl also be required if you've got any IPv6 addresses in /etc/resolv.conf.
 dnl In that case, enable this next line by deleting the "dnl" at the front
 dnl of it.
-dnl APPENDDEF(`conf_libar_ENVDEF', `-DAR_RES_MANUAL')
+@ARLIB@ APPENDDEF(`conf_libar_ENVDEF', `-DAR_RES_MANUAL')
 
 dnl POPAUTH -- POP-before-SMTP authentication
 dnl
@@ -87,6 +87,14 @@ dnl have v0.9.8 or later for SHA256 supp
 dnl lines by deleting "dnl" from the front of them and edit paths as needed.
 dnl APPENDDEF(`confINCDIRS', `-I/usr/local/ssl/include ')
 dnl APPENDDEF(`confLIBDIRS', `-L/usr/local/ssl/lib ')
+APPENDDEF(`confINCDIRS', `-I@SSLBASE@/include ')
+APPENDDEF(`confLIBDIRS', `-L@SSLBASE@/lib ')
+
+dnl pthread support
+dnl
+APPENDDEF(`confLIBS', `@PTHREAD_LDFLAGS@ ')
+APPENDDEF(`confINCDIRS', `-I@PTHREAD@/include ')
+APPENDDEF(`confLIBDIRS', `-L@PTHREAD@/lib ')
 
 dnl TRE -- Approximate regular expression matching
 dnl
@@ -116,9 +124,10 @@ dnl APPENDDEF(`confENVDEF', `-D_FFR_REPL
 dnl APPENDDEF(`confENVDEF', `-D_FFR_REQUIRED_HEADERS ')
 dnl APPENDDEF(`confENVDEF', `-D_FFR_SELECT_CANONICALIZATION ')
 dnl APPENDDEF(`confENVDEF', `-D_FFR_SELECTOR_HEADER ')
-dnl APPENDDEF(`confENVDEF', `-D_FFR_STATS ')
+@STATS@ APPENDDEF(`confENVDEF', `-D_FFR_STATS ')
 dnl APPENDDEF(`confENVDEF', `-D_FFR_VBR ')
 dnl APPENDDEF(`confENVDEF', `-D_FFR_ZTAGS ')
+@INET6@ APPENDDEF(`confENVDEF', `-DNETINET6 ')
 
 dnl DomainKeys -- Yahoo DomainKeys verification support
 dnl 
@@ -132,8 +141,8 @@ dnl
 dnl This must be in the search rules for your compile.  If necessary,
 dnl adjust the paths below and enable the lines by deleting "dnl" from the
 dnl front of them.
-dnl APPENDDEF(`bld_dkim_filter_INCDIRS', `-I/usr/local/sendmail/include')
-dnl APPENDDEF(`bld_dkim_filter_LIBDIRS', `-L/usr/local/sendmail/lib')
+APPENDDEF(`bld_dkim_filter_INCDIRS', `-I@LMBASE@/include')
+APPENDDEF(`bld_dkim_filter_LIBDIRS', `-L@LMBASE@/lib')
 
 dnl smfi_addheader() -- older versions of libmilter
 dnl
@@ -142,3 +151,22 @@ dnl primitive, you can enable this to ha
 dnl instead.  It will still work, but it breaks the DKIM specification.
 dnl To enable this, remove the "dnl" from the front of the line.
 dnl APPENDDEF(`conf_dkim_filter_ENVDEF', `-DNO_SMFI_INSHEADER ')
+
+dnl path fixes for pkgsrc
+dnl
+define(`confINCLUDEDIR', `@PREFIX@/include')
+define(`confLIBDIR', `@PREFIX@/lib')
+define(`confSBINDIR', `@PREFIX@/sbin')
+define(`confUBINDIR', `@PREFIX@/bin')
+define(`confEBINDIR', `@PREFIX@/libexec')
+define(`confMANROOT', `@PREFIX@/@PKGMANDIR@/man')
+define(`confMANROOTMAN', `@PREFIX@/@PKGMANDIR@/man')
+define(`confMAN4EXT', `3')
+define(`confMAN5EXT', `5')
+define(`confMAN8EXT', `8')
+define(`confINSTALL_RAWMAN', 'yes')
+define(`confDONT_INSTALL_CATMAN', 'yes')
+
+dnl option fixes for pkgsrc
+dnl
+define(`confLIBSEARCH', `@DBLIB@ @RESOLVLIB@')
