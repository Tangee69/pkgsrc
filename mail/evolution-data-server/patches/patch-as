$NetBSD: patch-as,v 1.4 2008/04/15 17:45:38 drochner Exp $

--- calendar/libical/src/libical/icaltz-util.c.orig	2008-01-23 12:16:42.000000000 +0100
+++ calendar/libical/src/libical/icaltz-util.c
@@ -21,6 +21,7 @@
  */
 
 #include <string.h>
+#if 0 /* XXX see below */
 #if defined(sun) && defined(__SVR4)
 #include <sys/byteorder.h>
 #else
@@ -34,6 +35,7 @@
 #include <endian.h>
 #endif
 #endif
+#endif
 #include <limits.h>
 #include <time.h>
 #include <stdlib.h>
@@ -85,6 +87,7 @@ typedef struct
 static int
 decode (const void *ptr)
 {
+#if 0 /* XXX nonportable, possibly alignment problems */
 #if defined(sun) && defined(__SVR4)
     if (sizeof (int) == 4)
 #ifdef _BIG_ENDIAN
@@ -99,9 +102,10 @@ decode (const void *ptr)
         return bswap_32 (*(const int *) ptr);
 #endif
 	else
+#endif
 	{
 		const unsigned char *p = ptr;
-		int result = *p & (1 << (CHAR_BIT - 1)) ? ~0 : 0;
+		unsigned int result = *p & (1 << (CHAR_BIT - 1)) ? ~0 : 0;
 
 		result = (result << 8) | *p++;
 		result = (result << 8) | *p++;
