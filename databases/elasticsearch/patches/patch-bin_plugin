$NetBSD: patch-bin_plugin,v 1.1 2015/10/18 16:02:05 fhajny Exp $

Fix paths and improve portability.

--- bin/plugin.orig	2015-10-15 09:16:10.000000000 +0000
+++ bin/plugin
@@ -15,15 +15,20 @@ while [ -h "$SCRIPT" ] ; do
   fi
 done
 
+#set defualt JAVA_HOME
+if [ -z "$JAVA_HOME" ]; then
+  JAVA_HOME="@PKG_JAVA_HOME@"
+fi
+
 # determine elasticsearch home
-ES_HOME=`dirname "$SCRIPT"`/..
+ES_HOME="@PREFIX@"
 
 # make ELASTICSEARCH_HOME absolute
 ES_HOME=`cd "$ES_HOME"; pwd`
 
 # Sets the default values for elasticsearch variables used in this script
 if [ -z "$CONF_DIR" ]; then
-  CONF_DIR="$ES_HOME/config"
+  CONF_DIR="@PKG_SYSCONFDIR@"
 
   if [ -z "$CONF_FILE" ]; then
     CONF_FILE="$CONF_DIR/elasticsearch.yml"
@@ -103,6 +108,6 @@ if [ -e "$CONF_FILE" ]; then
   esac
 fi
 
-export HOSTNAME=`hostname -s`
+export HOSTNAME=`hostname`
 
-eval "$JAVA" $JAVA_OPTS $ES_JAVA_OPTS -Xmx64m -Xms16m -Delasticsearch -Des.path.home=\""$ES_HOME"\" $properties -cp \""$ES_HOME/lib/*"\" org.elasticsearch.plugins.PluginManager $args
\ No newline at end of file
+eval "$JAVA" $JAVA_OPTS $ES_JAVA_OPTS -Xmx64m -Xms16m -Delasticsearch -Des.path.home=\""$ES_HOME"\" $properties -cp \""$ES_HOME/lib/elasticsearch/*"\" org.elasticsearch.plugins.PluginManager $args
